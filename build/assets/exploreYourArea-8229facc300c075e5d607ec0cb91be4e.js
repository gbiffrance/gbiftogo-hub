//# sourceMappingURL=exploreYourArea.js.map
(function(e){"function"===typeof define&&define.amd?define(e):window.purl=e()})(function(){function e(c,e){c=decodeURI(c);e=U[e?"strict":"loose"].exec(c);c={attr:{},param:{},seg:{}};for(var h=14;h--;)c.attr[C[h]]=e[h]||"";c.param.query=d(c.attr.query);c.param.fragment=d(c.attr.fragment);c.seg.path=c.attr.path.replace(/^\/+|\/+$/g,"").split("/");c.seg.fragment=c.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");c.attr.base=c.attr.host?(c.attr.protocol?c.attr.protocol+"://"+c.attr.host:c.attr.host)+
(c.attr.port?":"+c.attr.port:""):"";return c}function g(d){d=d.tagName;return"undefined"!==typeof d?u[d.toLowerCase()]:d}function h(d,c,e,g){var m=d.shift();if(m){var u=c[e]=c[e]||[];if("]"==m)if(D(u))""!==g&&u.push(g);else if("object"==typeof u){c=d=u;e=[];for(var C in c)c.hasOwnProperty(C)&&e.push(C);d[e.length]=g}else c[e]=[c[e],g];else{~m.indexOf("]")&&(m=m.substr(0,m.length-1));if(!R.test(m)&&D(u))if(0===c[e].length)u=c[e]={};else{C={};for(var N in c[e])C[N]=c[e][N];u=c[e]=C}h(d,u,m,g)}}else D(c[e])?
c[e].push(g):c[e]="object"==typeof c[e]?g:"undefined"==typeof c[e]?g:[c[e],g]}function d(d){return c(String(d).split(/&|;/),function(d,c){try{c=decodeURIComponent(c.replace(/\+/g," "))}catch(e){}var g=c.indexOf("="),m;a:{for(var u=c.length,C,G=0;G<u;++G)if(C=c[G],"]"==C&&(m=!1),"["==C&&(m=!0),"="==C&&!m){m=G;break a}m=void 0}u=c.substr(0,m||g);g=c.substr(m||g,c.length);g=g.substr(g.indexOf("=")+1,g.length);""===u&&(u=c,g="");c=u;if(~c.indexOf("]")){var J=c.split("[");h(J,d,"base",g)}else{if(!R.test(c)&&
D(d.base)){u={};for(J in d.base)u[J]=d.base[J];d.base=u}""!==c&&(J=d.base,u=J[c],"undefined"===typeof u?J[c]=g:D(u)?u.push(g):J[c]=[u,g])}return d},{base:{}}).base}function c(d,c,e){for(var g=0,h=d.length>>0;g<h;)g in d&&(e=c.call(void 0,e,d[g],g,d)),++g;return e}function D(d){return"[object Array]"===Object.prototype.toString.call(d)}function m(d,c){1===arguments.length&&!0===d&&(c=!0,d=void 0);d=d||window.location.toString();return{data:e(d,c||!1),attr:function(d){d=ea[d]||d;return"undefined"!==
typeof d?this.data.attr[d]:this.data.attr},param:function(d){return"undefined"!==typeof d?this.data.param.query[d]:this.data.param.query},fparam:function(d){return"undefined"!==typeof d?this.data.param.fragment[d]:this.data.param.fragment},segment:function(d){if("undefined"===typeof d)return this.data.seg.path;d=0>d?this.data.seg.path.length+d:d-1;return this.data.seg.path[d]},fsegment:function(d){if("undefined"===typeof d)return this.data.seg.fragment;d=0>d?this.data.seg.fragment.length+d:d-1;return this.data.seg.fragment[d]}}}
var u={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},C="source protocol authority userInfo user password host port relative path directory file query fragment".split(" "),ea={anchor:"fragment"},U={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},
R=/^[0-9]+$/;m.jQuery=function(d){null!=d&&(d.fn.url=function(c){var e="";this.length&&(e=d(this).attr(g(this[0]))||"");return m(e,c)},d.url=m)};m.jQuery(window.jQuery);return m});
(function(){function e(){var d=arguments;e.version="1.1.0";return new function(){var c=this.coordinate={};if(3<=d.length){c.degrees=parseInt(d[0]);c.minutes=parseInt(d[1]);c.seconds=parseFloat(d[2]);var e=0<=c.degrees}else if(1<=d.length&&"string"==typeof d[0]){var m;null!=(m=d[0].match(g))?(c.degrees=parseInt(m[1]),m=parseFloat(m[2])||0,c.minutes=parseInt(60*m),c.seconds=parseFloat(60*(60*m-c.minutes))):null!=(m=d[0].match(h))&&(c.degrees=parseInt(m[1]),c.minutes=parseFloat(m[2]||0),c.seconds=parseFloat(m[3]||
0),m=c.minutes%1)&&(c.minutes-=m,c.seconds=parseFloat((60*m).toFixed(6)))}else 1<=d.length&&"number"==typeof d[0]&&(c.degrees=parseInt(d[0]),m=Math.abs(parseFloat(d[0])-c.degrees),c.minutes=parseInt(60*m),m=60*(60*m-c.minutes),59.99995>m&&(c.seconds=parseFloat(m.toFixed(4))),c.seconds=parseFloat(m.toFixed(4)),60==c.seconds&&(c.seconds=0,c.minutes+=1,60==c.minutes&&(c.minutes=0,c.degrees+=1)),e=0<=d[0]);"string"===typeof d[d.length-1]&&((m=d[d.length-1].toUpperCase().match(/[NSEW]/))?(c.direction=
m[0],e="N"==m||"E"==m):e=0!==c.degrees?0<=c.degrees:0!==c.minutes?0<=c.minutes:0!==c.seconds?0<=c.seconds:!0);this.toDD=function(){var d=c.minutes/60+c.seconds/3600,g;g=0<=c.degrees?c.degrees+d:c.degrees-d;g=g.toFixed(6);c.direction&&("S"==c.direction||"W"==c.direction)&&0<d?g="-"+g:!c.direction&&!1===e&&0<d&&(g="-"+g);return g};this.toDM=function(d){var e=[Math.abs(c.degrees)+"\u00b0",(c.minutes+c.seconds/60).toFixed(4)+"'",c.direction?c.direction:""];return"string"===typeof d?e.join(d):e.join("")};
this.toDMS=function(d){var e=[Math.abs(c.degrees)+"\u00b0",c.minutes+"'",c.seconds.toFixed(4)+'"',c.direction?c.direction:""];return"string"===typeof d?e.join(d):e.join("")};this.latitude=function(){return c&&90>=Math.abs(c.degrees)&&(90!=Math.abs(c.degrees)||0==c.minutes&&0==c.seconds)&&60>c.minutes&&60>c.seconds&&(!c.direction||"N"==c.direction||"S"==c.direction)?(c.direction||(c.direction=e?"N":"S",c.degrees=Math.abs(c.degrees)),this):null};this.longitude=function(){return c&&180>=Math.abs(c.degrees)&&
(180!=Math.abs(c.degrees)||0==c.minutes&&0==c.seconds)&&60>c.minutes&&60>c.seconds&&(!c.direction||"E"==c.direction||"W"==c.direction)?(c.direction||(c.direction=e?"E":"W",c.degrees=Math.abs(c.degrees)),this):null};this.equals=function(d){return c&&d.coordinate&&c.degrees==d.coordinate.degrees&&c.minutes==d.coordinate.minutes&&c.seconds==d.coordinate.seconds&&c.direction==d.coordinate.direction}}}var g=/^([+-]?\d{1,3})(.\d+)?\s*[NSEW]?$/,h=/^[NSEW]?\s*([+-]?\d{1,3})\u00b0?\s*(?:(\d{1,2}(?:\.\d+)?)[\u2032'`]?\s*(?:(\d{1,2}(?:\.\d+)?)["\u2033]?\s*)?)?\s*[NSEW]?$/;
"function"===typeof define&&define.amd?define("magellan",function(){return e}):"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?module.exports=e:window.magellan=e})();
(function(e,g,h){(function(d){"function"==typeof define&&define.amd?define(["jquery"],d):jQuery&&!jQuery.fn.qtip&&d(jQuery)})(function(d){function c(a,b,f,A){this.id=f;this.target=a;this.tooltip=y;this.elements={target:a};this._id=w+"-"+f;this.timers={img:{}};this.options=b;this.plugins={};this.cache={event:{},target:d(),disabled:k,attr:A,onTooltip:k,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=k}function D(a){return a===
y||"object"!==d.type(a)}function m(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function u(a){var b,f,A,c;return D(a)?k:(D(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,D(b)||b.jquery||b.done?b=a.content={text:f=m(b)?k:b}:f=b.text,"ajax"in b&&(A=b.ajax,c=A&&A.once!==k,delete b.ajax,b.text=function(a,b){a=f||d(this).attr(b.options.content.attr)||"Loading...";var l=d.ajax(d.extend({},A,{context:b})).then(A.success,y,A.error).then(function(a){return a&&
c&&b.set("content.text",a),a},function(a,f,d){b.destroyed||0===a.status||b.set("content.text",f+": "+d)});return c?a:(b.set("content.text",a),l)}),"title"in b&&(D(b.title)||(b.button=b.title.button,b.title=b.title.text),m(b.title||k)&&(b.title=k))),"position"in a&&D(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&D(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===t?{ready:t}:{event:a.show}),"hide"in a&&D(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in
a&&D(a.style)&&(a.style={classes:a.style}),d.each(z,function(){this.sanitize&&this.sanitize(a)}),a)}function C(a,b){var f,d=0,c=a;for(b=b.split(".");c=c[b[d++]];)b.length>d&&(f=c);return[f||a,b.pop()]}function ea(a,b){var f,d,c;for(f in this.checks)for(d in this.checks[f])(c=RegExp(d,"i").exec(a))&&(b.push(c),("builtin"===f||this.plugins[f])&&this.checks[f][d].apply(this.plugins[f]||this,b))}function U(a){return va.concat("").join(a?"-"+a+" ":" ")}function R(a){return a&&{type:a.type,pageX:a.pageX,
pageY:a.pageY,target:a.target,relatedTarget:a.relatedTarget,scrollX:a.scrollX||e.pageXOffset||g.body.scrollLeft||g.documentElement.scrollLeft,scrollY:a.scrollY||e.pageYOffset||g.body.scrollTop||g.documentElement.scrollTop}||{}}function G(a,b){return 0<b?setTimeout(d.proxy(a,this),b):(a.call(this),h)}function sa(a){return this.tooltip.hasClass(E)?k:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=G.call(this,function(){this.toggle(t,a)},this.options.show.delay),h)}function ta(a){if(this.tooltip.hasClass(E))return k;
var b=d(a.relatedTarget),f=b.closest(L)[0]===this.tooltip[0],A=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&f||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(f||A))try{a.preventDefault(),a.stopImmediatePropagation()}catch(c){}else this.timers.hide=G.call(this,function(){this.toggle(k,a)},this.options.hide.delay,this)}function da(a){return this.tooltip.hasClass(E)||!this.options.hide.inactive?
k:(clearTimeout(this.timers.inactive),this.timers.inactive=G.call(this,function(){this.hide(a)},this.options.hide.inactive),h)}function ia(a){this.rendered&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}function ja(a,b,f){d(g.body).delegate(a,(b.split?b:b.join(ka+" "))+ka,function(){var a=B.api[d.attr(this,Z)];a&&!a.disabled&&f.apply(a,arguments)})}function ua(a,b,f){var A,F,p,e,l=d(g.body),n=a[0]===g?l:a,r=a.metadata?a.metadata(f.metadata):y,h="html5"===f.metadata.type&&r?r[f.metadata.name]:
y,K=a.data(f.metadata.name||"qtipopts");try{K="string"==typeof K?d.parseJSON(K):K}catch(O){}if(p=d.extend(t,{},B.defaults,f,"object"==typeof K?u(K):y,u(h||r)),f=p.position,p.id=b,"boolean"==typeof p.content.text){if(F=a.attr(p.content.attr),p.content.attr===k||!F)return k;p.content.text=F}if(f.container.length||(f.container=l),f.target===k&&(f.target=n),p.show.target===k&&(p.show.target=n),p.show.solo===t&&(p.show.solo=f.container.closest("body")),p.hide.target===k&&(p.hide.target=n),p.position.viewport===
t&&(p.position.viewport=f.container),f.container=f.container.eq(0),f.at=new P(f.at,t),f.my=new P(f.my),a.data(w))if(p.overwrite)a.qtip("destroy",!0);else if(p.overwrite===k)return k;return a.attr(fa,b),p.suppress&&(e=a.attr("title"))&&a.removeAttr("title").attr(Q,e).attr("title",""),A=new c(a,p,b,!!F),a.data(w,A),a.one("remove.qtip-"+b+" removeqtip.qtip-"+b,function(){var a;(a=d(this).data(w))&&a.destroy(!0)}),A}function N(a){return a.charAt(0).toUpperCase()+a.slice(1)}function J(a,b){var f,d;f=b.charAt(0).toUpperCase()+
b.slice(1);var c=(b+" "+wa.join(f+" ")+f).split(" "),p=0;if(ga[b])return a.css(ga[b]);for(;f=c[p++];)if((d=a.css(f))!==h)return ga[b]=f,d}function V(a,b){return Math.ceil(parseFloat(J(a,b)))}function la(a,b){this._ns="tip";this.options=b;this.offset=b.offset;this.size=[b.width,b.height];this.init(this.qtip=a)}function ma(a,b){this.options=b;this._ns="-modal";this.init(this.qtip=a)}function na(a){this._ns="ie6";this.init(this.qtip=a)}var B,q,P,aa,ba,t=!0,k=!1,y=null,z={},w="qtip",fa="data-hasqtip",
Z="data-qtip-id",va=["ui-widget","ui-tooltip"],L="."+w,oa="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),pa=w+"-fixed",ha=w+"-default",W=w+"-focus",xa=w+"-hover",E=w+"-disabled",Q="oldtitle",S=function(){for(var a=3,b=g.createElement("div");(b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e")&&b.getElementsByTagName("i")[0];);return 4<a?a:0/0}(),T=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined",
"3_2").replace("_",".").replace("_",""))||k;q=c.prototype;q._when=function(a){return d.when.apply(d,a)};q.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,f=this.options,A=this.cache,c=this.elements,p=f.content.text,e=f.content.title,l=f.content.button,g=f.position,r=("."+this._id+" ",[]);return d.attr(this.target[0],"aria-describedby",this._id),this.tooltip=c.tooltip=d("<div/>",{id:this._id,"class":[w,ha,f.style.classes,w+"-pos-"+f.position.my.abbrev()].join(" "),width:f.style.width||
"",height:f.style.height||"",tracking:"mouse"===g.target&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":k,"aria-describedby":this._id+"-content","aria-hidden":t}).toggleClass(E,this.disabled).attr(Z,this.id).data(w,this).appendTo(g.container).append(c.content=d("<div />",{"class":w+"-content",id:this._id+"-content","aria-atomic":t})),this.rendered=-1,this.positioning=t,e&&(this._createTitle(),d.isFunction(e)||r.push(this._updateTitle(e,k))),l&&this._createButton(),d.isFunction(p)||
r.push(this._updateContent(p,k)),this.rendered=t,this._setWidget(),d.each(z,function(a){var f;"render"===this.initialize&&(f=this(b))&&(b.plugins[a]=f)}),this._unassignEvents(),this._assignEvents(),this._when(r).then(function(){b._trigger("render");b.positioning=k;b.hiddenDuringWait||!f.show.ready&&!a||b.toggle(t,A.event,k);b.hiddenDuringWait=k}),B.api[this.id]=this,this};q.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=t;var a=this.target,b=a.attr(Q);this.rendered&&this.tooltip.stop(1,
0).find("*").remove().end().remove();d.each(this.plugins,function(){this.destroy&&this.destroy()});clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this._unassignEvents();a.removeData(w).removeAttr(Z).removeAttr(fa).removeAttr("aria-describedby");this.options.suppress&&b&&a.attr("title",b).removeAttr(Q);this._unbind(a);this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=y;delete B.api[this.id]}}return this.destroyed?this.target:(a===t&&"hide"!==this.triggering||
!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)};aa=q.checks={builtin:{"^id$":function(a,b,f,A){f=f===t?B.nextid:f;var c=w+"-"+f;f!==k&&0<f.length&&!d("#"+c).length?(this._id=c,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=A},"^prerender":function(a,b,f){f&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,
b,f){this._updateContent(f)},"^content.attr$":function(a,b,f,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(f))},"^content.title$":function(a,b,f){return f?(f&&!this.elements.title&&this._createTitle(),this._updateTitle(f),h):this._removeTitle()},"^content.button$":function(a,b,f){this._updateButton(f)},"^content.title.(text|button)$":function(a,b,f){this.set("content."+b,f)},"^position.(my|at)$":function(a,b,f){"string"==typeof f&&(a[b]=new P(f,"at"===b))},
"^position.container$":function(a,b,f){this.rendered&&this.tooltip.appendTo(f)},"^show.ready$":function(a,b,f){f&&(!this.rendered&&this.render(t)||this.toggle(t))},"^style.classes$":function(a,b,f,d){this.rendered&&this.tooltip.removeClass(d).addClass(f)},"^style.(width|height)":function(a,b,f){this.rendered&&this.tooltip.css(b,f)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,f){this.rendered&&this.tooltip.toggleClass(ha,!!f)},"^events.(render|show|move|hide|focus|blur)$":function(a,
b,f){this.rendered&&this.tooltip[(d.isFunction(f)?"":"un")+"bind"]("tooltip"+b,f)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse);this._unassignEvents();this._assignEvents()}}}};q.get=function(a){if(this.destroyed)return this;a=C(this.options,a.toLowerCase());a=a[0][a[1]];return a.precedance?a.string():a};var ya=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,
za=/^prerender|show\.ready/i;q.set=function(a,b){if(this.destroyed)return this;var f,A=this.rendered,c=k,p=this.options;return this.checks,"string"==typeof a?(f=a,a={},a[f]=b):a=d.extend({},a),d.each(a,function(b,f){if(A&&za.test(b))return delete a[b],h;var e,g=C(p,b.toLowerCase());e=g[0][g[1]];g[0][g[1]]=f&&f.nodeType?d(f):f;c=ya.test(b)||c;a[b]=[g[0],g[1],f,e]}),u(p),this.positioning=t,d.each(a,d.proxy(ea,this)),this.positioning=k,this.rendered&&0<this.tooltip[0].offsetWidth&&c&&this.reposition("mouse"===
p.position.target?y:this.cache.event),this};q._update=function(a,b){var f=this,c=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,c.event,this)||""),d.isFunction(a.then)?(c.waiting=t,a.then(function(a){return c.waiting=k,f._update(a,b)},y,function(a){return f._update(a,b)})):a===k||!a&&""!==a?k:(a.jquery&&0<a.length?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){a.images&&a.images.length&&f.rendered&&
0<f.tooltip[0].offsetWidth&&f.reposition(c.event,!a.length)}))):k};q._waitForContent=function(a){var b=this.cache;return b.waiting=t,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=k}).promise()};q._updateContent=function(a,b){this._update(a,this.elements.content,b)};q._updateTitle=function(a,b){this._update(a,this.elements.title,b)===k&&this._removeTitle(k)};q._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle();a.titlebar=
d("<div />",{"class":w+"-titlebar "+(this.options.style.widget?U("header"):"")}).append(a.title=d("<div />",{id:b,"class":w+"-title","aria-atomic":t})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)});this.options.content.button&&this._createButton()};
q._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=y,a!==k&&this.reposition())};q.reposition=function(a,b){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=t;var f,c,F=this.cache,p=this.tooltip,h=this.options.position,l=h.target,n=h.my,r=h.at,I=h.viewport,K=h.container,O=h.adjust,m=O.method.split(" "),x=p.outerWidth(k),q=p.outerHeight(k),u=0,w=0,D=p.css("position"),v={left:0,top:0},y=0<p[0].offsetWidth,B=a&&"scroll"===
a.type,C=d(e),E=K[0].ownerDocument,H=this.mouse;if(d.isArray(l)&&2===l.length)r={x:"left",y:"top"},v={left:l[0],top:l[1]};else if("mouse"===l)r={x:"left",y:"top"},!H||!H.pageX||!O.mouse&&a&&a.pageX?a&&a.pageX||((!O.mouse||this.options.show.distance)&&F.origin&&F.origin.pageX?a=F.origin:(!a||a&&("resize"===a.type||"scroll"===a.type))&&(a=F.event)):a=H,"static"!==D&&(v=K.offset()),E.body.offsetWidth!==(e.innerWidth||E.documentElement.clientWidth)&&(c=d(g.body).offset()),v={left:a.pageX-v.left+(c&&c.left||
0),top:a.pageY-v.top+(c&&c.top||0)},O.mouse&&B&&H&&(v.left-=(H.scrollX||0)-C.scrollLeft(),v.top-=(H.scrollY||0)-C.scrollTop());else{if("event"===l?a&&a.target&&"scroll"!==a.type&&"resize"!==a.type?F.target=d(a.target):a.target||(F.target=this.elements.target):"event"!==l&&(F.target=d(l.jquery?l:this.elements.target)),l=F.target,l=d(l).eq(0),0===l.length)return this;l[0]===g||l[0]===e?(u=T?e.innerWidth:l.width(),w=T?e.innerHeight:l.height(),l[0]===e&&(v={top:(I||l).scrollTop(),left:(I||l).scrollLeft()})):
z.imagemap&&l.is("area")?f=z.imagemap(this,l,r,z.viewport?m:k):z.svg&&l&&l[0].ownerSVGElement?f=z.svg(this,l,r,z.viewport?m:k):(u=l.outerWidth(k),w=l.outerHeight(k),v=l.offset());f&&(u=f.width,w=f.height,c=f.offset,v=f.position);v=this.reposition.offset(l,v,K);(3.1<T&&4.1>T||4.3<=T&&4.33>T||!T&&"fixed"===D)&&(v.left-=C.scrollLeft(),v.top-=C.scrollTop());(!f||f&&f.adjustable!==k)&&(v.left+="right"===r.x?u:"center"===r.x?u/2:0,v.top+="bottom"===r.y?w:"center"===r.y?w/2:0)}return v.left+=O.x+("right"===
n.x?-x:"center"===n.x?-x/2:0),v.top+=O.y+("bottom"===n.y?-q:"center"===n.y?-q/2:0),z.viewport?(v.adjusted=z.viewport(this,v,h,u,w,x,q),c&&v.adjusted.left&&(v.left+=c.left),c&&v.adjusted.top&&(v.top+=c.top)):v.adjusted={left:0,top:0},this._trigger("move",[v,I.elem||I],a)?(delete v.adjusted,b===k||!y||isNaN(v.left)||isNaN(v.top)||"mouse"===l||!d.isFunction(h.effect)?p.css(v):d.isFunction(h.effect)&&(h.effect.call(p,this,d.extend({},v)),p.queue(function(a){d(this).css({opacity:"",height:""});S&&this.style.removeAttribute("filter");
a()})),this.positioning=k,this):this};q.reposition.offset=function(a,b,f){if(!f[0])return b;var c,e,p;a=d(a[0].ownerDocument);var h=!!S&&"CSS1Compat"!==g.compatMode;f=f[0];do if("static"!==(e=d.css(f,"position"))){if("fixed"===e){e=f.getBoundingClientRect();var l=a;b.left+=-1*l.scrollLeft();b.top+=-1*l.scrollTop()}else e=d(f).position(),e.left+=parseFloat(d.css(f,"borderLeftWidth"))||0,e.top+=parseFloat(d.css(f,"borderTopWidth"))||0;b.left-=e.left+(parseFloat(d.css(f,"marginLeft"))||0);b.top-=e.top+
(parseFloat(d.css(f,"marginTop"))||0);c||"hidden"===(p=d.css(f,"overflow"))||"visible"===p||(c=d(f))}while(f=f.offsetParent);c&&(c[0]!==a[0]||h)&&(b.left+=1*c.scrollLeft(),b.top+=1*c.scrollTop());return b};var X=(P=q.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase();this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase();this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!b;a=a.charAt(0);
this.precedance="t"===a||"b"===a?"y":"x"}).prototype;X.invert=function(a,b){this[a]="left"===this[a]?"right":"right"===this[a]?"left":b||this[a]};X.string=function(){var a=this.x,b=this.y;return a===b?a:"y"===this.precedance||this.forceY&&"center"!==b?b+" "+a:a+" "+b};X.abbrev=function(){var a=this.string().split(" ");return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")};X.clone=function(){return new P(this.string(),this.forceY)};q.toggle=function(a,b,f){var c=this.cache,e=this.options,p=this.tooltip;
if(b){if(/over|enter/.test(b.type)&&/out|leave/.test(c.event.type)&&e.show.target.add(b.target).length===e.show.target.length&&p.has(b.relatedTarget).length)return this;c.event=R(b)}if(this.waiting&&!a&&(this.hiddenDuringWait=t),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,l,n,e=a?"show":"hide",r=this.options[e],I=(this.options[a?"hide":"show"],this.options.position),K=this.options.content,O=this.tooltip.css("width"),m=this.tooltip.is(":visible"),
q=a||1===r.target.length,u=!b||2>r.target.length||c.target[0]===b.target;return(typeof a).search("boolean|number")&&(a=!m),h=!p.is(":animated")&&m===a&&u,l=h?y:!!this._trigger(e,[90]),this.destroyed?this:(l!==k&&a&&this.focus(b),!l||h?this:(d.attr(p[0],"aria-hidden",!a),a?(c.origin=R(this.mouse),d.isFunction(K.text)&&this._updateContent(K.text,k),d.isFunction(K.title)&&this._updateTitle(K.title,k),!ba&&"mouse"===I.target&&I.adjust.mouse&&(d(g).bind("mousemove."+w,this._storeMouse),ba=t),O||p.css("width",
p.outerWidth(k)),this.reposition(b,f),O||p.css("width",""),r.solo&&("string"==typeof r.solo?d(r.solo):d(L,r.solo)).not(p).not(r.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete c.origin,ba&&!d(L+'[tracking="true"]:visible',r.solo).not(p).length&&(d(g).unbind("mousemove."+w),ba=k),this.blur(b)),n=d.proxy(function(){a?(S&&p[0].style.removeAttribute("filter"),p.css("overflow",""),"string"==typeof r.autofocus&&d(this.options.show.autofocus,p).focus(),this.options.show.target.trigger("qtip-"+
this.id+"-inactive")):p.css({display:"",visibility:"",opacity:"",left:"",top:""});this._trigger(a?"visible":"hidden")},this),r.effect===k||q===k?(p[e](),n()):d.isFunction(r.effect)?(p.stop(1,1),r.effect.call(p,this),p.queue("fx",function(a){n();a()})):p.fadeTo(90,a?1:0,n),a&&r.target.trigger("qtip-"+this.id+"-inactive"),this))};q.show=function(a){return this.toggle(t,a)};q.hide=function(a){return this.toggle(k,a)};q.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(L),f=this.tooltip,
c=parseInt(f[0].style.zIndex,10),e=B.zindex+b.length;return f.hasClass(W)||this._trigger("focus",[e],a)&&(c!==e&&(b.each(function(){this.style.zIndex>c&&--this.style.zIndex}),b.filter("."+W).qtip("blur",a)),f.addClass(W)[0].style.zIndex=e),this};q.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(W),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)};q.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(E):
this.disabled):"boolean"!=typeof a&&(a=t),this.rendered&&this.tooltip.toggleClass(E,a).attr("aria-disabled",a),this.disabled=!!a,this)};q.enable=function(){return this.disable(k)};q._createButton=function(){var a=this,b=this.elements,f=b.tooltip,c=this.options.content.button,e="string"==typeof c?c:"Close tooltip";b.button&&b.button.remove();b.button=c.jquery?c:d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":w+"-icon"),title:e,"aria-label":e}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",
html:"&times;"}));b.button.appendTo(b.titlebar||f).attr("role","button").click(function(b){return f.hasClass(E)||a.hide(b),k})};q._updateButton=function(a){if(!this.rendered)return k;var b=this.elements.button;a?this._createButton():b.remove()};q._setWidget=function(){var a=this.options.style.widget,b=this.elements,f=b.tooltip,d=f.hasClass(E);f.removeClass(E);E=a?"ui-state-disabled":"qtip-disabled";f.toggleClass(E,d);f.toggleClass("ui-helper-reset "+U(),a).toggleClass(ha,this.options.style.def&&!a);
b.content&&b.content.toggleClass(U("content"),a);b.titlebar&&b.titlebar.toggleClass(U("header"),a);b.button&&b.button.toggleClass(w+"-icon",!a)};q._storeMouse=function(a){(this.mouse=R(a)).type="mousemove"};q._bind=function(a,b,f,c,e){c="."+this._id+(c?"-"+c:"");b.length&&d(a).bind((b.split?b:b.join(c+" "))+c,d.proxy(f,e||this))};q._unbind=function(a,b){d(a).unbind("."+this._id+(b?"-"+b:""))};var ka="."+w;d(function(){ja(L,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,f=d(a.currentTarget),
c=d(a.relatedTarget||a.target),e=this.options;b?(this.focus(a),f.hasClass(pa)&&!f.hasClass(E)&&clearTimeout(this.timers.hide)):"mouse"===e.position.target&&e.hide.event&&e.show.target&&!c.closest(e.show.target[0]).length&&this.hide(a);f.toggleClass(xa,b)});ja("["+Z+"]",oa,da)});q._trigger=function(a,b,f){var c=d.Event("tooltip"+a);return c.originalEvent=f&&d.extend({},f)||this.cache.event||y,this.triggering=a,this.tooltip.trigger(c,[this].concat(b||[])),this.triggering=k,!c.isDefaultPrevented()};
q._bindEvents=function(a,b,f,c,e,p){if(c.add(f).length===c.length){var g=[];b=d.map(b,function(b){var f=d.inArray(b,a);return-1<f?(g.push(a.splice(f,1)[0]),h):b});g.length&&this._bind(f,g,function(a){(this.rendered&&0<this.tooltip[0].offsetWidth?p:e).call(this,a)})}this._bind(f,a,e);this._bind(c,b,p)};q._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?k:(this.cache.event=R(a),this.cache.target=a?d(a.target):[h],clearTimeout(this.timers.show),this.timers.show=G.call(this,
function(){this.render("object"==typeof a||f.show.ready)},f.show.delay),h)}var f=this.options,c=f.show.target,e=f.hide.target,p=f.show.event?d.trim(""+f.show.event).split(" "):[],g=f.hide.event?d.trim(""+f.hide.event).split(" "):[];/mouse(over|enter)/i.test(f.show.event)&&!/mouse(out|leave)/i.test(f.hide.event)&&g.push("mouseleave");this._bind(c,"mousemove",function(a){this._storeMouse(a);this.cache.onTarget=t});this._bindEvents(p,g,c,e,b,function(){clearTimeout(this.timers.show)});(f.show.ready||
f.prerender)&&b.call(this,a)};q._assignEvents=function(){var a=this,b=this.options,f=b.position,c=this.tooltip,h=b.show.target,p=b.hide.target,k=f.container,l=f.viewport,n=d(g),r=(d(g.body),d(e)),I=b.show.event?d.trim(""+b.show.event).split(" "):[],m=b.hide.event?d.trim(""+b.hide.event).split(" "):[];d.each(b.events,function(b,f){a._bind(c,"toggle"===b?["tooltipshow","tooltiphide"]:["tooltip"+b],f,null,c)});/mouse(out|leave)/i.test(b.hide.event)&&"window"===b.hide.leave&&this._bind(n,["mouseout",
"blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)});b.hide.fixed?p=p.add(c.addClass(pa)):/mouse(over|enter)/i.test(b.show.event)&&this._bind(p,"mouseleave",function(){clearTimeout(this.timers.show)});-1<(""+b.hide.event).indexOf("unfocus")&&this._bind(k.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),f=this.rendered&&!this.tooltip.hasClass(E)&&0<this.tooltip[0].offsetWidth,c=0<b.parents(L).filter(this.tooltip[0]).length;b[0]===this.target[0]||
b[0]===this.tooltip[0]||c||this.target.has(b[0]).length||!f||this.hide(a)});"number"==typeof b.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",da),this._bind(p.add(c),B.inactiveEvents,da,"-inactive"));this._bindEvents(I,m,h,p,sa,ta);this._bind(h.add(c),"mousemove",function(a){if("number"==typeof b.hide.distance){var f=this.cache.origin||{},d=this.options.hide.distance,c=Math.abs;(c(a.pageX-f.pageX)>=d||c(a.pageY-f.pageY)>=d)&&this.hide(a)}this._storeMouse(a)});"mouse"===f.target&&f.adjust.mouse&&
(b.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){this.cache.onTarget="mouseenter"===a.type}),this._bind(n,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(E)&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}));(f.adjust.resize||l.length)&&this._bind(d.event.special.resize?l:r,"resize",ia);f.adjust.scroll&&this._bind(r.add(f.container),"scroll",ia)};q._unassignEvents=function(){var a=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&
this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],e,g];this._unbind(d([]).pushStack(d.grep(a,function(a){return"object"==typeof a})))};B=d.fn.qtip=function(a,b,f){var c=(""+a).toLowerCase(),e=y,p=d.makeArray(arguments).slice(1),g=p[p.length-1],l=this[0]?d.data(this[0],w):y;return!arguments.length&&l||"api"===c?l:"string"==typeof a?(this.each(function(){var a=d.data(this,w);if(!a)return t;if(g&&g.timeStamp&&(a.cache.event=
g),!b||"option"!==c&&"options"!==c)a[c]&&a[c].apply(a,p);else{if(f===h&&!d.isPlainObject(b))return e=a.get(b),k;a.set(b,f)}}),e!==y?e:this):"object"!=typeof a&&arguments.length?h:(l=u(d.extend(t,{},a)),this.each(function(a){var b,f;return f=d.isArray(l.id)?l.id[a]:l.id,f=!f||f===k||1>f.length||B.api[f]?B.nextid++:f,b=ua(d(this),f,l),b===k?t:(B.api[f]=b,d.each(z,function(){"initialize"===this.initialize&&this(b)}),b._assignInitialEvents(g),h)}))};d.qtip=c;B.api={};d.each({attr:function(a,b){if(this.length){var f=
this[0],c=d.data(f,"qtip");if("title"===a&&c&&"object"==typeof c&&c.options.suppress)return 2>arguments.length?d.attr(f,Q):(c&&"title"===c.options.content.attr&&c.cache.attr&&c.set("content.text",b),this.attr(Q,b))}return d.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(a){var b=(d([]),d.fn.clone_replacedByqTip.apply(this,arguments));return a||b.filter("["+Q+"]").attr("title",function(){return d.attr(this,Q)}).removeAttr(Q),b}},function(a,b){if(!b||d.fn[a+"_replacedByqTip"])return t;
var f=d.fn[a+"_replacedByqTip"]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||f.apply(this,arguments)}});d.ui||(d.cleanData_replacedByqTip=d.cleanData,d.cleanData=function(a){for(var b,f=0;(b=d(a[f])).length;f++)if(b.attr(fa))try{b.triggerHandler("removeqtip")}catch(c){}d.cleanData_replacedByqTip.apply(this,arguments)});B.version="2.2.0";B.nextid=0;B.inactiveEvents=oa;B.zindex=15E3;B.defaults={prerender:k,id:k,overwrite:t,suppress:t,content:{text:t,attr:"title",title:k,button:k},position:{my:"top left",
at:"bottom right",target:k,container:k,viewport:k,adjust:{x:0,y:0,mouse:t,scroll:t,resize:t,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:k})}},show:{target:k,event:"mouseenter",effect:t,delay:90,solo:k,ready:k,autofocus:k},hide:{target:k,event:"mouseleave",effect:t,delay:0,fixed:k,inactive:k,leave:"window",distance:k},style:{classes:"",widget:k,width:k,height:k,def:t},events:{render:y,move:y,show:y,hide:y,toggle:y,visible:y,hidden:y,focus:y,blur:y}};var ca=
!!g.createElement("canvas").getContext,qa=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ga={},wa=["Webkit","O","Moz","ms"];if(ca){q=e.devicePixelRatio||1;var X=function(){var a=g.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),Y=q/X}else var ra=function(a,b,f){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+
(f||"")+'" />'};d.extend(la.prototype,{init:function(a){var b,f;f=this.element=a.elements.tip=d("<div />",{"class":w+"-tip"}).prependTo(a.tooltip);ca?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1E5,b.save()):(b=ra("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",f).add(f),["click","mousedown"],function(a){a.stopPropagation()},this._ns));a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},
_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&("top"===a.y||"center"===a.y&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(t))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===k||b===k?a=k:a===t?a=new P(b.string()):a.string||(a=new P(a),a.fixed=
t),a},_parseWidth:function(a,b,f){var d=this.qtip.elements;b="border"+N(b)+"Width";return(f?V(f,b):V(d.content,b)||V(this._useTitle(a)&&d.titlebar||d.content,b)||V(d.tooltip,b))||0},_parseRadius:function(a){var b=this.qtip.elements,f="border"+N(a.y)+N(a.x)+"Radius";return 9>S?0:V(this._useTitle(a)&&b.titlebar||b.content,f)||V(b.tooltip,f)||0},_invalidColour:function(a,b,f){b=a.css(b);return!b||f&&b===a.css(f)||qa.test(b)?k:b},_parseColours:function(a){var b=this.qtip.elements,f=this.element.css("cssText",
""),c="border"+N(a[a.precedance])+N("color");a=this._useTitle(a)&&b.titlebar||b.content;var e=this._invalidColour,g=[];return g[0]=e(f,"background-color")||e(a,"background-color")||e(b.content,"background-color")||e(b.tooltip,"background-color")||f.css("background-color"),g[1]=e(f,c,"color")||e(a,c,"color")||e(b.content,c,"color")||e(b.tooltip,c,"color")||b.tooltip.css(c),d("*",f).add(f).css("cssText","background-color:transparent !important;border:0 !important;"),g},_calculateSize:function(a){var b,
f,d,c="y"===a.precedance,e=this.options.width,g=this.options.height;a="c"===a.abbrev();var l=(c?e:g)*(a?.5:1),h=Math.pow,k=Math.round,I=Math.sqrt(h(l,2)+h(g,2)),l=[this.border/l*I,this.border/g*I];return l[2]=Math.sqrt(h(l[0],2)-h(this.border,2)),l[3]=Math.sqrt(h(l[1],2)-h(this.border,2)),b=I+l[2]+l[3]+(a?0:l[0]),f=b/I,d=[k(f*e),k(f*g)],c?d:d.reverse()},_calculateTip:function(a,b,f){f=f||1;b=b||this.size;var d=b[0]*f;b=b[1]*f;f=Math.ceil(d/2);var c=Math.ceil(b/2),d={br:[0,0,d,b,d,0],bl:[0,0,d,0,0,
b],tr:[0,b,d,0,d,b],tl:[0,0,0,b,d,b],tc:[0,b,f,0,d,b],bc:[0,0,d,0,f,b],rc:[0,0,d,c,0,b],lc:[d,0,d,b,0,c]};return d.lt=d.br,d.rt=d.bl,d.lb=d.tr,d.rb=d.tl,d[a.abbrev()]},_drawCoords:function(a,b){a.beginPath();a.moveTo(b[0],b[1]);a.lineTo(b[2],b[3]);a.lineTo(b[4],b[5]);a.closePath()},create:function(){var a=this.corner=(ca||S)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),
this.corner},update:function(a,b){if(!this.enabled)return this;var f,c,g,p,h,l,n,r,I=this.qtip.elements;l=this.element;var m=l.children(),q=this.options,u=this.size,x=q.mimic,w=Math.round;a||(a=this.qtip.cache.corner||this.corner);x===k?x=a:(x=new P(x),x.precedance=a.precedance,"inherit"===x.x?x.x=a.x:"inherit"===x.y?x.y=a.y:x.x===x.y&&(x[a.precedance]=a[a.precedance]));c=x.precedance;"x"===a.precedance?this._swapDimensions():this._resetDimensions();f=this.color=this._parseColours(a);"transparent"!==
f[1]?(r=this.border=this._parseWidth(a,a[a.precedance]),q.border&&1>r&&!qa.test(f[1])&&(f[0]=f[1]),this.border=r=q.border!==t?q.border:r):this.border=r=0;n=this.size=this._calculateSize(a);l.css({width:n[0],height:n[1],lineHeight:n[1]+"px"});l="y"===a.precedance?[w("left"===x.x?r:"right"===x.x?n[0]-u[0]-r:(n[0]-u[0])/2),w("top"===x.y?n[1]-u[1]:0)]:[w("left"===x.x?n[0]-u[0]:0),w("top"===x.y?r:"bottom"===x.y?n[1]-u[1]-r:(n[1]-u[1])/2)];ca?(g=m[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,
0,6E3,6E3),p=this._calculateTip(x,u,Y),h=this._calculateTip(x,this.size,Y),m.attr("width",n[0]*Y).attr("height",n[1]*Y),m.css("width",n[0]).css("height",n[1]),this._drawCoords(g,h),g.fillStyle=f[1],g.fill(),g.translate(l[0]*Y,l[1]*Y),this._drawCoords(g,p),g.fillStyle=f[0],g.fill()):(p=this._calculateTip(x),p="m"+p[0]+","+p[1]+" l"+p[2]+","+p[3]+" "+p[4]+","+p[5]+" xe",l[2]=r&&/^(r|b)/i.test(a.string())?8===S?2:1:0,m.css({coordsize:n[0]+r+" "+(n[1]+r),antialias:""+(-1<x.string().indexOf("center")),
left:l[0]-l[2]*Number("x"===c),top:l[1]-l[2]*Number("y"===c),width:n[0]+r,height:n[1]+r}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:n[0]+r+" "+(n[1]+r),path:p,fillcolor:f[0],filled:!!a,stroked:!a}).toggle(!(!r&&!a));!a&&b.html(ra("stroke",'weight="'+2*r+'px" color="'+f[1]+'" miterlimit="1000" joinstyle="miter"'))}));e.opera&&setTimeout(function(){I.tip.css({display:"inline-block",visibility:"visible"})},1);b!==k&&this.calculate(a,n)},calculate:function(a,b){if(!this.enabled)return k;
var f,c,e=this,g=this.qtip.elements,h=this.element,l=this.options.offset,n=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,f=a.precedance,b=b||this._calculateSize(a),c=[a.x,a.y],"x"===f&&c.reverse(),d.each(c,function(d,c){var h,k,A;"center"===c?(h="y"===f?"left":"top",n[h]="50%",n["margin-"+h]=-Math.round(b["y"===f?0:1]/2)+l):(h=e._parseWidth(a,c,g.tooltip),k=e._parseWidth(a,c,g.content),A=e._parseRadius(a),n[c]=Math.max(-e.border,d?k:l+(A>h?A:-h)))}),n[a[f]]-=b["x"===f?0:1],h.css({margin:"",
top:"",bottom:"",left:"",right:""}).css(n),n},reposition:function(a,b,f){function d(a,b,f,c,e){"shift"===a&&l.precedance===b&&n[c]&&"center"!==l[f]?l.precedance="x"===l.precedance?"y":"x":"shift"!==a&&n[c]&&(l[b]="center"===l[b]?0<n[c]?c:e:l[b]===c?e:c)}function c(a,b,d){"center"===l[a]?q["margin-"+b]=m[a]=e["margin-"+b]-n[b]:(g=e[d]!==h?[n[b],-e[b]]:[-n[b],e[b]],(m[a]=Math.max(g[0],g[1]))>g[0]&&(f[b]-=n[b],m[b]=k),q[e[d]!==h?d:b]=m[a])}if(this.enabled){var e,g;a=b.cache;var l=this.corner.clone(),
n=f.adjusted,r=b.options.position.adjust.method.split(" ");b=r[0];var r=r[1]||r[0],m={left:k,top:k,x:0,y:0},q={};this.corner.fixed!==t&&(d(b,"x","y","left","right"),d(r,"y","x","top","bottom"),l.string()===a.corner.string()||a.cornerTop===n.top&&a.cornerLeft===n.left||this.update(l,k));e=this.calculate(l);e.right!==h&&(e.left=-e.right);e.bottom!==h&&(e.top=-e.bottom);e.user=this.offset;(m.left="shift"===b&&!!n.left)&&c("x","left","right");(m.top="shift"===r&&!!n.top)&&c("y","top","bottom");this.element.css(q).toggle(!(m.x&&
m.y||"center"===l.x&&m.y||"center"===l.y&&m.x));f.left-=e.left.charAt?e.user:"shift"!==b||m.top||!m.left&&!m.top?e.left+this.border:0;f.top-=e.top.charAt?e.user:"shift"!==r||m.left||!m.left&&!m.top?e.top+this.border:0;a.cornerLeft=n.left;a.cornerTop=n.top;a.corner=l.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});q=z.tip=function(a){return new la(a,a.options.style.tip)};q.initialize="render";
q.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b});/string|boolean/i.test(typeof b.corner)||(b.corner=t)}};aa.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};d.extend(t,B.defaults,{style:{tip:{corner:t,mimic:k,
width:6,height:6,border:t,offset:0}}});var M;M=function(){function a(a){1>m.length&&a.length?a.not("body").blur():m.first().focus()}function b(b){if(e.is(":visible")){b=d(b.target);var c=f.tooltip,g=b.closest(L);(1>g.length?k:parseInt(g[0].style.zIndex,10)>parseInt(c[0].style.zIndex,10))||b.closest(L)[0]===c[0]||a(b)}}var f,c,e,h=this,m={};d.extend(h,{init:function(){return e=h.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return k}}).hide(),d(g.body).bind("focusin.qtip-modal",
b),d(g).bind("keydown.qtip-modal",function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a)}),e.bind("click.qtip-modal",function(a){f&&f.options.show.modal.blur&&f.hide(a)}),h},update:function(a){f=a;m=a.options.show.modal.stealfocus!==k?a.tooltip.find("*").filter(function(){var a;if(d.expr[":"].focusable)a=d.expr[":"].focusable;else{var b,f,c;a=!isNaN(d.attr(this,"tabindex"));var e=this.nodeName&&this.nodeName.toLowerCase();a="area"===e?(b=this.parentNode,f=b.name,this.href&&f&&"map"===
b.nodeName.toLowerCase()?(c=d("img[usemap=#"+f+"]")[0],!!c&&c.is(":visible")):!1):/input|select|textarea|button|object/.test(e)?!this.disabled:"a"===e?this.href||a:a}return a}):[]},toggle:function(b,n,m){var q=(d(g.body),b.tooltip),u=b.options.show.modal,w=u.effect,D=n?"show":"hide",x=e.is(":visible"),q=d(".qtip-modal").filter(":visible:not(:animated)").not(q);return h.update(b),n&&u.stealfocus!==k&&a(d(":focus")),e.toggleClass("blurs",u.blur),n&&e.appendTo(g.body),e.is(":animated")&&x===n&&c!==k||
!n&&q.length?h:(e.stop(t,k),d.isFunction(w)?w.call(e,n):w===k?e[D]():e.fadeTo(parseInt(m,10)||90,n?1:0,function(){n||e.hide()}),n||e.queue(function(a){e.css({left:"",top:""});d(".qtip-modal").length||e.detach();a()}),c=n,f.destroyed&&(f=y),h)}});h.init()};M=new M;d.extend(ma.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=M.elem,b.addClass("qtip-modal").css("z-index",B.modal_zindex+d(".qtip-modal").length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,
e){c=a.originalEvent;if(a.target===b[0])if(c&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(c.type)&&d(c.relatedTarget).closest(M.elem[0]).length)try{a.preventDefault()}catch(g){}else(!c||c&&"tooltipsolo"!==c.type)&&this.toggle(a,"tooltipshow"===a.type,e)},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(".qtip-modal"),g=B.modal_zindex+e.length,h=parseInt(b[0].style.zIndex,10);M.elem[0].style.zIndex=g-1;e.each(function(){this.style.zIndex>
h&&--this.style.zIndex});e.filter("."+W).qtip("blur",a.originalEvent);b.addClass(W)[0].style.zIndex=g;M.update(c);try{a.preventDefault()}catch(l){}}},this._ns,this),a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(".qtip-modal").filter(":visible").not(b).last().qtip("focus",a)},this._ns,this),h):this},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:(M.toggle(this.qtip,!!b,c),h)},destroy:function(){this.qtip.tooltip.removeClass("qtip-modal");this.qtip._unbind(this.qtip.tooltip,this._ns);
M.toggle(this.qtip,k);delete this.qtip.elements.overlay}});q=z.modal=function(a){return new ma(a,a.options.show.modal)};q.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:a.show.modal.on===h&&(a.show.modal.on=t))};B.modal_zindex=B.zindex-200;q.initialize="render";aa.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(0<this.qtip.tooltip[0].offsetWidth)}};d.extend(t,B.defaults,{show:{modal:{on:k,effect:t,blur:t,
stealfocus:t,escape:t}}});z.viewport=function(a,b,c,d,h,p,m){function l(a,c,d,f,e,g,h,l,k){var p=b[e],n=v[a],m=E[a],A=n===e?k:n===g?-k:-k/2,q=y[e]+z[e]-(u?0:t[e]),F=q-p;k=p+k-("width"===h?D:x)-q;c=A-(v.precedance===a||n===v[c]?m===e?l:m===g?-l:-l/2:0)-("center"===m?l/2:0);return"shift"===d?(c=(n===e?1:-1)*A,b[e]+=0<F?F:0<k?-k:0,b[e]=Math.max(-t[e]+z[e],p-c,Math.min(Math.max(-t[e]+z[e]+("width"===h?D:x),p+c),b[e],"center"===n?p-A:1E9))):(f*="flipinvert"===d?2:0,0<F&&(n!==e||0<k)?(b[e]-=c+f,r.invert(a,
e)):0<k&&(n!==g||0<F)&&(b[e]-=("center"===n?-c:c)+f,r.invert(a,g)),y>b[e]&&-b[e]>k&&(b[e]=p,r=v.clone())),b[e]-p}var n,r,q,t,u,D,x,y,z,B=c.target,C=a.elements.tooltip,v=c.my,E=c.at,J=c.adjust,G=J.method.split(" "),M=G[0],G=G[1]||G[0],H=c.viewport;c=c.container;var N=a.cache,L={left:0,top:0};return H.jquery&&B[0]!==e&&B[0]!==g.body&&"none"!==J.method?(t=c.offset()||L,u="static"===c.css("position"),n="fixed"===C.css("position"),D=H[0]===e?H.width():H.outerWidth(k),x=H[0]===e?H.height():H.outerHeight(k),
y={left:n?0:H.scrollLeft(),top:n?0:H.scrollTop()},z=H.offset()||L,("shift"!==M||"shift"!==G)&&(r=v.clone()),L={left:"none"!==M?l("x","y",M,J.x,"left","right","width",d,p):0,top:"none"!==G?l("y","x",G,J.y,"top","bottom","height",h,m):0},r&&N.lastClass!==(q=w+"-pos-"+r.abbrev())&&C.removeClass(a.cache.lastClass).addClass(a.cache.lastClass=q),L):L};z.polys={polygon:function(a,b){var c,d={width:0,height:0,position:{top:1E10,right:0,bottom:0,left:1E10},adjustable:k},e,g=[],h=1,l=1,n,m;for(e=a.length;e--;)c=
[parseInt(a[--e],10),parseInt(a[e+1],10)],c[0]>d.position.right&&(d.position.right=c[0]),c[0]<d.position.left&&(d.position.left=c[0]),c[1]>d.position.bottom&&(d.position.bottom=c[1]),c[1]<d.position.top&&(d.position.top=c[1]),g.push(c);if(a=d.width=Math.abs(d.position.right-d.position.left),c=d.height=Math.abs(d.position.bottom-d.position.top),"c"===b.abbrev())d.position={left:d.position.left+d.width/2,top:d.position.top+d.height/2};else{for(;0<a&&0<c&&0<h&&0<l;)for(a=Math.floor(a/2),c=Math.floor(c/
2),"left"===b.x?h=a:"right"===b.x?h=d.width-a:h+=Math.floor(a/2),"top"===b.y?l=c:"bottom"===b.y?l=d.height-c:l+=Math.floor(c/2),e=g.length;e--&&!(2>g.length);)n=g[e][0]-d.position.left,m=g[e][1]-d.position.top,("left"===b.x&&n>=h||"right"===b.x&&h>=n||"center"===b.x&&(h>n||n>d.width-h)||"top"===b.y&&m>=l||"bottom"===b.y&&l>=m||"center"===b.y&&(l>m||m>d.height-l))&&g.splice(e,1);d.position={left:g[0][0],top:g[0][1]}}return d},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,
c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:1.75,tl:1.25,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var g=z.polys._angles[e.abbrev()];e=0===g?0:c*Math.cos(g*Math.PI);g=d*Math.sin(g*Math.PI);return{width:2*c-Math.abs(e),height:2*d-Math.abs(g),position:{left:a+e,top:b+g},adjustable:k}},circle:function(a,b,c,d){return z.polys.ellipse(a,b,c,c,d)}};z.svg=function(a,b,c){var e,h,p,m,l,n,r;a=d(g);for(var q=b[0],t=d(q.ownerSVGElement),u=!0;!q.getBBox;)q=q.parentNode;if(!q.getBBox||!q.parentNode)return k;
t.attr("width")||t.width()||parseInt(t.css("width"),10);t.attr("height")||t.height()||parseInt(t.css("height"),10);b=(parseInt(b.css("stroke-width"),10)||0)/2;switch(q.nodeName){case "ellipse":case "circle":n=z.polys.ellipse(q.cx.baseVal.value,q.cy.baseVal.value,(q.rx||q.r).baseVal.value+b,(q.ry||q.r).baseVal.value+b,c);break;case "line":case "polygon":case "polyline":l=q.points||[{x:q.x1.baseVal.value,y:q.y1.baseVal.value},{x:q.x2.baseVal.value,y:q.y2.baseVal.value}];n=[];m=-1;for(b=l.numberOfItems||
l.length;b>++m;)p=l.getItem?l.getItem(m):l[m],n.push.apply(n,[p.x,p.y]);n=z.polys.polygon(n,c);break;default:n=q.getBoundingClientRect(),n={width:n.width,height:n.height,position:{left:n.left,top:n.top}},u=!1}return r=n.position,t=t[0],u&&t.createSVGPoint&&(e=q.getScreenCTM(),l=t.createSVGPoint(),l.x=r.left,l.y=r.top,h=l.matrixTransform(e),r.left=h.x,r.top=h.y),r.left+=a.scrollLeft(),r.top+=a.scrollTop(),n};z.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,g,h,m=b.attr("shape").toLowerCase().replace("poly",
"polygon");a=d('img[usemap="#'+b.parent("map").attr("name")+'"]');var l=d.trim(b.attr("coords")).replace(/,$/,"").split(",");if(!a.length)return k;if("polygon"===m)c=z.polys.polygon(l,c);else{if(!z.polys[m])return k;g=-1;h=l.length;for(b=[];h>++g;)b.push(parseInt(l[g],10));c=z.polys[m].apply(this,b.concat(c))}return e=a.offset(),e.left+=Math.ceil((a.outerWidth(k)-a.width())/2),e.top+=Math.ceil((a.outerHeight(k)-a.height())/2),c.position.left+=e.left,c.position.top+=e.top,c};d.extend(na.prototype,
{_scroll:function(){var a=this.qtip.elements.overlay;a&&(a[0].style.top=d(e).scrollTop()+"px")},init:function(a){var b=a.tooltip;1>d("select, object").length&&(this.bgiframe=a.elements.bgiframe=d('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(b),a._bind(b,"tooltipmove",this.adjustBGIFrame,this._ns,
this));this.redrawContainer=d("<div/>",{id:w+"-rcontainer"}).appendTo(g.body);a.elements.overlay&&a.elements.overlay.addClass("qtipmodal-ie6fix")&&(a._bind(e,["scroll","resize"],this._scroll,this._ns,this),a._bind(b,["tooltipshow"],this._scroll,this._ns,this));this.redraw()},adjustBGIFrame:function(){var a,b;b=this.qtip.tooltip;var c={height:b.outerHeight(k),width:b.outerWidth(k)},d=this.qtip.plugins.tip,e=this.qtip.elements.tip;b=parseInt(b.css("borderLeftWidth"),10)||0;b={left:-b,top:-b};d&&e&&
(a="x"===d.corner.precedance?["width","left"]:["height","top"],b[a[1]]-=e[a[0]]());this.bgiframe.css(b).css(c)},redraw:function(){if(1>this.qtip.rendered||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,g=this.qtip.options.style,h=this.qtip.options.position.container;return this.qtip.drawing=1,g.height&&e.css("height",g.height),g.width?e.css("width",g.width):(e.css("width","").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=-1<(c+
d).indexOf("%")?h.width()/100:0,c=(-1<c.indexOf("%")?a:1)*parseInt(c,10)||b,d=(-1<d.indexOf("%")?a:1)*parseInt(d,10)||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css("width",Math.round(b)).appendTo(h)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([e,this.qtip.tooltip],this._ns)}});(z.ie6=function(a){return 6===S?new na(a):k}).initialize="render";aa.ie6={"^content|style$":function(){this.redraw()}}})})(window,document);
var geocoder,map,marker,circle,markerInfowindow,lastInfoWindow,taxon,taxonGuid,points=[],infoWindows=[],speciesGroup="ALL_SPECIES",zoomForRadius={1E3:14,5E3:12,1E4:11},radiusForZoom={11:10,12:5,14:1};jQuery.i18n.properties({name:"messages",path:BC_CONF.contextPath+"/messages/i18n/",mode:"map",language:BC_CONF.locale});
$(document).ready(function(){geocoder=new google.maps.Geocoder;$("#taxa-level-0 tbody tr").live("mouseover mouseout",function(){"mouseover"==event.type?$(this).addClass("hoverRow"):$(this).removeClass("hoverRow")}).live("click",function(e){e.preventDefault();groupClicked(this)});$("input#locationSearch").click(function(e){e.preventDefault();geocodeAddress()});$("select#radius").change(function(e){EYA_CONF.radius=parseInt($(this).val());e=1E3*EYA_CONF.radius;circle.setRadius(e);EYA_CONF.zoom=zoomForRadius[e];
map.setZoom(EYA_CONF.zoom?EYA_CONF.zoom:12);updateMarkerPosition(marker.getPosition());loadGroups()});$(".tooltips").qtip({style:{classes:"ui-tooltip-rounded ui-tooltip-shadow"},position:{target:"mouse",adjust:{x:6,y:14}}});var e=window.location.hash.replace(/^#/,""),g=$.url().param("default"),e=-1!=e.indexOf("%7C")?e:encodeURIComponent(e);g?initialize():e?(g=e.split("%7C"),3==g.length?bookmarkedSearch(g[0],g[1],g[2],null):4==g.length?bookmarkedSearch(g[0],g[1],g[2],g[3]):attemptGeolocation()):attemptGeolocation();
$("#viewAllRecords").live("click",function(e){e.preventDefault();e="q=*:*&lat="+$("#latitude").val()+"&lon="+$("#longitude").val()+"&radius="+$("#radius").val()+"&fq=geospatial_kosher:true";"ALL_SPECIES"!=speciesGroup&&(e+="&fq=species_group:"+speciesGroup);document.location.href=EYA_CONF.contextPath+"/occurrences/search?"+e});$("#downloadData").live("click",function(e){e.preventDefault();e="?q=*:*&lat="+$("#latitude").val()+"&lon="+$("#longitude").val()+"&radius="+$("#radius").val()+"&fq=geospatial_kosher:true";
"ALL_SPECIES"!=speciesGroup&&(e+="&fq=species_group:"+speciesGroup);e=encodeURIComponent(e);document.location.href=EYA_CONF.contextPath+"/download?searchParams="+e+"&targetUri="+EYA_CONF.forwardURI});$("#addressHelp").qtip({content:{title:{text:"About the matched address",button:"Close"},text:'<img src="'+EYA_CONF.imagesUrlPrefix+'/spinner.gif" alt="" class="no-rounding"/>',ajax:{url:EYA_CONF.contextPath+"/proxy/wordpress",data:{page_id:27726,"content-only":1},type:"get"}},position:{at:"bottom right",
my:"top left"},style:{width:450,tip:"topLeft",classes:"ui-tooltip-light ui-tooltip-rounded ui-tooltip-shadow"},show:{effect:function(e){$(this).slideDown(300,function(){$(this).dequeue()})}},hide:{fixed:!0,effect:function(e){$(this).slideUp(300,function(){$(this).dequeue()})},event:"unfocus"}}).bind("click",function(e){e.preventDefault();return!1});$("#left-col a").qtip({style:{classes:"ui-tooltip-rounded ui-tooltip-shadow"},position:{target:"mouse",adjust:{x:10,y:12}}});$("#searchForm").bind("keypress",
function(e){13==e.keyCode&&(e.preventDefault(),geocodeAddress())})});function initialize(){loadMap();loadGroups()}
function loadMap(){var e=new google.maps.LatLng($("#latitude").val(),$("#longitude").val());map=new google.maps.Map(document.getElementById("mapCanvas"),{zoom:EYA_CONF.zoom,center:e,scrollwheel:!1,streetViewControl:!0,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.HYBRID});marker=new google.maps.Marker({position:e,title:"Marker Location",
map:map,draggable:!0});markerInfowindow=new google.maps.InfoWindow({content:'<div class="infoWindow">marker address</div>'});google.maps.event.addListener(marker,"click",function(e){lastInfoWindow&&lastInfoWindow.close();markerInfowindow.setPosition(e.latLng);markerInfowindow.open(map,marker);lastInfoWindow=markerInfowindow});var g=1010*parseInt($("select#radius").val());circle=new google.maps.Circle({map:map,radius:g,strokeWeight:1,strokeColor:"white",strokeOpacity:.5,fillColor:"#222",fillOpacity:.2,
zIndex:-10});circle.bindTo("center",marker,"position");geocodePosition(e);google.maps.event.addListener(marker,"dragstart",function(){updateMarkerAddress("Dragging...")});google.maps.event.addListener(marker,"drag",function(){updateMarkerAddress("Dragging...")});google.maps.event.addListener(marker,"dragend",function(){updateMarkerAddress("Drag ended");updateMarkerPosition(marker.getPosition());geocodePosition(marker.getPosition());loadGroups();map.panTo(marker.getPosition())});google.maps.event.addListener(map,
"zoom_changed",function(){loadRecordsLayer()});points&&0!=points.length||loadRecordsLayer()}function geocodePosition(e){geocoder.geocode({latLng:e},function(e){e&&0<e.length?(e=e[0].formatted_address,updateMarkerAddress(e),markerInfowindow.setContent('<div class="infoWindow"><b>Your Location:</b><br/>'+e+"</div>")):updateMarkerAddress("Cannot determine address at this location.")})}
function updateMarkerAddress(e){$("#markerAddress").empty().html(e);$("#location").val(e);$("#dialog-confirm code").html(e)}function updateMarkerPosition(e){$("#latitude").val(e.lat());$("#longitude").val(e.lng());location.hash=e.lat()+"|"+e.lng()+"|"+EYA_CONF.zoom+"|"+speciesGroup;$("#dialog-confirm #rad").html(EYA_CONF.radius)}
function loadRecordsLayer(e){if(!map&&!e)setTimeout(function(){points&&0!=points.length||loadRecordsLayer(!0)},2E3);else if(map){e=EYA_CONF.biocacheServiceUrl+"/geojson/radius-points.jsonp?callback=?";var g=map&&map.getZoom()?map.getZoom():12,g={lat:$("#latitude").val(),lon:$("#longitude").val(),radius:$("#radius").val(),fq:"geospatial_kosher:true",qc:EYA_CONF.queryContext,zoom:g};taxon?g.q='taxon_name:"'+taxon+'"':g.group=speciesGroup;$.getJSON(e,g,loadNewGeoJsonData)}}
function loadNewGeoJsonData(e){points&&0<points.length&&$.each(points,function(e,h){h.setMap(null)});points=[];infoWindows&&0<infoWindows.length&&$.each(infoWindows,function(e,h){h.close()});infoWindows=[];$.each(e.features,function(e,h){var d=new google.maps.LatLng(h.geometry.coordinates[1],h.geometry.coordinates[0]),c=EYA_CONF.imagesUrlPrefix+"/circle-"+h.properties.color.replace("#","")+".png",c=new google.maps.MarkerImage(c,new google.maps.Size(9,9),new google.maps.Point(0,0),new google.maps.Point(4,
5));points[e]=new google.maps.Marker({map:map,position:d,title:h.properties.count+" occurrences",icon:c});if(0<$.inArray("|",taxa)){d=taxa.split("|");c=[];for(j in d)c.push(rank+":"+d[j]);d=c.join(" OR ")}else d="*:*";c="";taxonGuid?c="&fq=species_guid:"+taxonGuid:"ALL_SPECIES"!=speciesGroup&&(c="&fq=species_group:"+speciesGroup);infoWindows[e]=new google.maps.InfoWindow({content:'<div class="infoWindow">Number of records: '+h.properties.count+'<br/><a href="'+EYA_CONF.contextPath+"/occurrences/search?q="+
d+c+"&lat="+h.geometry.coordinates[1]+"&lon="+h.geometry.coordinates[0]+'&radius=0.05">View list of records</a></div>',maxWidth:200,disableAutoPan:!1});google.maps.event.addListener(points[e],"click",function(c){lastInfoWindow&&lastInfoWindow.close();infoWindows[e].setPosition(c.latLng);infoWindows[e].open(map,points[e]);lastInfoWindow=infoWindows[e]})})}
function attemptGeolocation(){if(navigator&&navigator.geolocation){var e=function(){$("#mapCanvas").empty();updateMarkerPosition(new google.maps.LatLng($("#latitude").val(),$("#longitude").val()));initialize()};$("#mapCanvas").html('Waiting for confirmation to use your current location (see browser message at top of window)<br/><a href="#" onClick="loadMap(); return false;">Click here to load map</a>').css("color","red").css("font-size","14px");navigator.geolocation.getCurrentPosition(function(e){$("#mapCanvas").empty();
updateMarkerPosition(new google.maps.LatLng(e.coords.latitude,e.coords.longitude));initialize()},e);setTimeout(function(){map||e()},9E3)}else google.loader&&google.loader.ClientLocation?updateMarkerPosition(new google.maps.LatLng(google.loader.ClientLocation.latitude,google.loader.ClientLocation.longitude)):EYA_CONF.zoom=12,initialize()}
function geocodeAddress(e){e=$("input#address").val();var g=null;if(e&&-1<e.indexOf(",")&&magellan){var h=e.split(","),d=magellan(h[0].trim()).latitude(),h=magellan(h[1].trim()).longitude();d&&h&&(g=new google.maps.LatLng(d.toDD(),h.toDD()),updateMarkerAddress("GPS coordinates: "+d.toDD()+", "+h.toDD()),updateMarkerPosition(g),initialize(),loadRecordsLayer())}!g&&geocoder&&e?geocoder.geocode({address:e,region:EYA_CONF.geocodeRegion},function(c,d){d==google.maps.GeocoderStatus.OK?(updateMarkerAddress(c[0].formatted_address),
updateMarkerPosition(c[0].geometry.location),initialize(),loadRecordsLayer()):alert("Geocode was not successful for the following reason: "+d)}):initialize()}function addAddressToPage(e){if(e&&200==e.Status.code){var g=e.Placemark[0],h=g.Point.coordinates[1],g=g.Point.coordinates[0];updateMarkerAddress(e.Placemark[0].address);updateMarkerPosition(new google.maps.LatLng(h,g))}else alert("Sorry, we were unable to geocode that address")}
function groupClicked(e){speciesGroup=$(e).find("a.taxonBrowse").attr("id");taxonGuid=taxon=null;$("#taxa-level-0 tr").removeClass("activeRow");$(e).addClass("activeRow");$("#taxa-level-1 tbody tr").addClass("activeRow");"ALL_SPECIES"==speciesGroup?$("#recordsGroupText").text("all"):$("#recordsGroupText").text("selected");map&&loadRecordsLayer();e=EYA_CONF.biocacheServiceUrl+"/explore/group/"+speciesGroup+".json?callback=?";var g={lat:$("#latitude").val(),lon:$("#longitude").val(),radius:$("#radius").val(),
fq:"geospatial_kosher:true",qc:EYA_CONF.queryContext,pageSize:50};$("#taxaDiv").html("[loading...]");$.getJSON(e,g,function(e){e&&processSpeciesJsonData(e)})}
function processSpeciesJsonData(e,g){g||$("#rightList tbody").empty();if(0<e.length){g=$("#rightList tbody tr").length;for(i=0;i<e.length;i++){var h='<tr><td class="speciesIndex">'+(i+g+1)+".</td>",h=h+'<td class="sciName"><a id="'+e[i].guid+'" class="taxonBrowse2" title="display on map" href="'+e[i].name+'"><i>'+e[i].name+"</i></a>";e[i].commonName&&(h=h+" : "+e[i].commonName+"");if(EYA_CONF.speciesPageUrl){var d='<div class="speciesInfo">';e[i].guid&&(d=d+'<a class="speciesPageLink" title="view species page" href="'+
EYA_CONF.speciesPageUrl+e[i].guid+'"><img src="'+EYA_CONF.imagesUrlPrefix+'/page_white_go.png" alt="species page icon" style="margin-bottom:-3px;" class="no-rounding"/> species profile</a> | ');d=d+'<a href="'+EYA_CONF.contextPath+"/occurrences/search?q=taxon_name:%22"+e[i].name+"%22&lat="+$("input#latitude").val()+"&lon="+$("input#longitude").val()+"&radius="+$("select#radius").val()+'" title="view list of records"><img src="'+EYA_CONF.imagesUrlPrefix+'/database_go.png" alt="search list icon" style="margin-bottom:-3px;" class="no-rounding"/> list of records</a></div>';
h+=d}h=h+'</td><td class="rightCounts">'+e[i].count+" </td></tr>";$("#rightList tbody").append(h)}50==e.length&&(e=$("#rightList tbody tr").length,g=$("div#rightList").data("sort")?$("div#rightList").data("sort"):"index",$("#rightList tbody").append('<tr id="loadMoreSpecies"><td>&nbsp;</td><td colspan="2"><a href="'+e+'" data-sort="'+g+'">Show more species</a></td></tr>'))}else g||$("#rightList tbody").append('<tr><td></td><td colspan="2">[no species found]</td></tr>');$("#rightList tbody tr").click(function(c){c.preventDefault();
c=$(this).find("a.taxonBrowse2").attr("href").split("/");c=c[c.length-1].replace(/%20/g," ");taxonGuid=$(this).find("a.taxonBrowse2").attr("id");taxon=c;$("#rightList tbody tr").removeClass("activeRow2");$("#rightList tbody tr#info").detach();(c=$(this).find(".speciesInfo").html())&&$(this).after('<tr id="info"><td><td>'+c+"<td></td></tr>");$(this).addClass("activeRow2");loadRecordsLayer()});$("#loadMoreSpecies a, thead.fixedHeader a").click(function(c){c.preventDefault();c=$("#taxa-level-0 tr.activeRow").find("a.taxonBrowse").attr("id");
taxa=[];taxa=0<c.indexOf("|")?c.split("|"):c;c=$(this).attr("href");var d=$(this).data("sort")?$(this).data("sort"):"index",e=d,g=!1;"common"==d&&(g=!0,e="index");var h=!0;0==c&&(h=!1,$(".scrollContent").scrollTop(0));$("div#rightList").data("sort",d);d=EYA_CONF.biocacheServiceUrl+"/explore/group/"+speciesGroup+".json?callback=?";c={lat:$("#latitude").val(),lon:$("#longitude").val(),radius:$("#radius").val(),fq:"geospatial_kosher:true",start:c,common:g,sort:e,pageSize:50,qc:EYA_CONF.queryContext};
$("#loadMoreSpecies").detach();$.getJSON(d,c,function(c){processSpeciesJsonData(c,h)})});$("#rightList tbody tr").hover(function(){$(this).addClass("hoverCell")},function(){$(this).removeClass("hoverCell")})}
function loadGroups(){var e=EYA_CONF.biocacheServiceUrl+"/explore/groups.json?callback=?",g={lat:$("#latitude").val(),lon:$("#longitude").val(),radius:$("#radius").val(),fq:"geospatial_kosher:true",facets:"species_group",qc:EYA_CONF.queryContext};$.getJSON(e,g,function(e){e&&populateSpeciesGroups(e)})}
function populateSpeciesGroups(e){0<e.length&&($("#taxa-level-0 tbody").empty(),$.each(e,function(e,h){e=h.name;var d=h.speciesCount,c=e;"ALL_SPECIES"==e&&(c="all.species");h="<tr"+(e==speciesGroup?" class='activeRow'":"")+" title='click to view group on map'><td class='indent"+h.level+"'><a href='#' id='"+e+"' class='taxonBrowse' title='click to view group on map'>"+jQuery.i18n.prop(c,c)+"</a></td><td>"+d+"</td></tr>";$("#taxa-level-0 tbody").append(h)}),e=$("#taxa-level-0").height(),$(".tableContainer").height(e+
2),e=$("#taxa-level-0 tbody").height(),$("#rightList tbody").height(e),$("#taxa-level-0 tbody tr.activeRow").click())}function bookmarkedSearch(e,g,h,d){EYA_CONF.radius=radiusForZoom[h];EYA_CONF.zoom=parseInt(h);$("select#radius").val(EYA_CONF.radius);d&&(speciesGroup=d);updateMarkerPosition(new google.maps.LatLng(e,g));initialize()};