//# sourceMappingURL=jquery.autocomplete.js.map
(function(d){d.fn.extend({autocomplete:function(a,b){var t="string"==typeof a;b=d.extend({},d.Autocompleter.defaults,{url:t?a:null,data:t?null:a,delay:t?d.Autocompleter.defaults.delay:10,max:b&&!b.scroll?10:150},b);b.highlight=b.highlight||function(a){return a};b.formatMatch=b.formatMatch||b.formatItem;return this.each(function(){new d.Autocompleter(this,b)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});d.Autocompleter=function(a,b){function t(){var x=p.selected();if(!x)return!1;var c=x.result;u=c;if(b.multiple){var m=r(f.val());if(1<m.length){var e=b.multipleSeparator.length,g=d(a).selection().start,l,w=0;d.each(m,function(a,b){w+=b.length;if(g<=w)return l=a,!1;w+=e});m[l]=c;c=m.join(b.multipleSeparator)}c+=b.multipleSeparator}f.val(c);h();f.trigger("result",[x.data,x.value]);
return!0}function n(a,d){if(m==c.DEL)p.hide();else if(a=f.val(),d||a!=u)u=a,a=k(a),a.length>=b.minChars?(f.addClass(b.loadingClass),b.matchCase||(a=a.toLowerCase()),e(a,g,h)):(f.removeClass(b.loadingClass),p.hide())}function r(a){return a?b.multiple?d.map(a.split(b.multipleSeparator),function(b){return d.trim(a).length?d.trim(b):null}):[d.trim(a)]:[""]}function k(c){if(!b.multiple)return c;var m=r(c);if(1==m.length)return m[0];m=d(a).selection().start;m=m==c.length?r(c):r(c.replace(c.substring(m),
""));return m[m.length-1]}function h(){p.visible();p.hide();clearTimeout(v);f.removeClass(b.loadingClass);b.mustMatch&&f.search(function(a){a||(b.multiple?(a=r(f.val()).slice(0,-1),f.val(a.join(b.multipleSeparator)+(a.length?b.multipleSeparator:""))):(f.val(""),f.trigger("result",null)))})}function g(e,g){g&&g.length&&l?(f.removeClass(b.loadingClass),p.display(g,e),g=g[0].value,b.autoFill&&k(f.val()).toLowerCase()==e.toLowerCase()&&m!=c.BACKSPACE&&(f.val(f.val()+g.substring(k(u).length)),d(a).selection(u.length,
u.length+g.length)),p.show()):h()}function e(c,m,g){b.matchCase||(c=c.toLowerCase());var e=q.load(c);if(e&&e.length)m(c,e);else if("string"==typeof b.url&&0<b.url.length){var f={timestamp:+new Date};d.each(b.extraParams,function(a,c){f[a]="function"==typeof c?c():c});d.ajax({mode:"abort",port:"autocomplete"+a.name,dataType:b.dataType,url:b.url,data:d.extend({q:k(c),limit:b.max},f),success:function(a){var e;if(!(e=b.parse&&b.parse(a))){e=[];a=a.split("\n");for(var g=0;g<a.length;g++){var f=d.trim(a[g]);
f&&(f=f.split("|"),e[e.length]={data:f,value:f[0],result:b.formatResult&&b.formatResult(f,f[0])||f[0]})}}q.add(c,e);m(c,e)}})}else p.emptyList(),g(c)}var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},f=d(a).attr("autocomplete","off").addClass(b.inputClass),v,u="",q=d.Autocompleter.Cache(b),l=0,m,w={mouseDownOnSelect:!1},p=d.Autocompleter.Select(b,a,t,w),y;d.browser.opera&&d(a.form).bind("submit.autocomplete",function(){if(y)return y=!1});f.bind((d.browser.opera?
"keypress":"keydown")+".autocomplete",function(a){l=1;m=a.keyCode;switch(a.keyCode){case c.UP:a.preventDefault();p.visible()?p.prev():n(0,!0);break;case c.DOWN:a.preventDefault();p.visible()?p.next():n(0,!0);break;case c.PAGEUP:a.preventDefault();p.visible()?p.pageUp():n(0,!0);break;case c.PAGEDOWN:a.preventDefault();p.visible()?p.pageDown():n(0,!0);break;case b.multiple&&","==d.trim(b.multipleSeparator)&&c.COMMA:case c.TAB:case c.RETURN:if(t())return a.preventDefault(),y=!0,!1;break;case c.ESC:p.hide();
break;default:clearTimeout(v),v=setTimeout(n,b.delay)}}).focus(function(){l++}).blur(function(){l=0;w.mouseDownOnSelect||(clearTimeout(v),v=setTimeout(h,200))}).click(function(){1<l++&&!p.visible()&&n(0,!0)}).bind("search",function(){function a(b,m){var e;if(m&&m.length)for(var g=0;g<m.length;g++)if(m[g].result.toLowerCase()==b.toLowerCase()){e=m[g];break}"function"==typeof c?c(e):f.trigger("result",e&&[e.data,e.value])}var c=1<arguments.length?arguments[1]:null;d.each(r(f.val()),function(c,b){e(b,
a,a)})}).bind("flushCache",function(){q.flush()}).bind("setOptions",function(a,c){d.extend(b,c);"data"in c&&q.populate()}).bind("unautocomplete",function(){p.unbind();f.unbind();d(a.form).unbind(".autocomplete")})};d.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,
width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};d.Autocompleter.Cache=function(a){function b(b,e){a.matchCase||(b=b.toLowerCase());var c=b.indexOf(e);"word"==a.matchContains&&(c=b.toLowerCase().search("\\b"+e.toLowerCase()));return-1==c?!1:0==c||a.matchContains}function t(b,e){h>a.cacheLength&&
r();k[b]||h++;k[b]=e}function n(){if(!a.data)return!1;var b={},e=0;a.url||(a.cacheLength=1);b[""]=[];for(var c=0,f=a.data.length;c<f;c++){var h=a.data[c],h="string"==typeof h?[h]:h,k=a.formatMatch(h,c+1,a.data.length);if(!1!==k){var n=k.charAt(0).toLowerCase();b[n]||(b[n]=[]);h={value:k,data:h,result:a.formatResult&&a.formatResult(h)||k};b[n].push(h);e++<a.max&&b[""].push(h)}}d.each(b,function(b,c){a.cacheLength++;t(b,c)})}function r(){k={};h=0}var k={},h=0;setTimeout(n,25);return{flush:r,add:t,populate:n,
load:function(g){if(!a.cacheLength||!h)return null;if(!a.url&&a.matchContains){var e=[],c;for(c in k)if(0<c.length){var f=k[c];d.each(f,function(a,c){b(c.value,g)&&e.push(c)})}return e}if(k[g])return k[g];if(a.matchSubset)for(c=g.length-1;c>=a.minChars;c--)if(f=k[g.substr(0,c)])return e=[],d.each(f,function(a,c){b(c.value,g)&&(e[e.length]=c)}),e;return null}}};d.Autocompleter.Select=function(a,b,t,n){function r(){u&&(q=d("<div/>").hide().addClass(a.resultsClass).css("position","absolute").appendTo(document.body),
l=d("<ul/>").appendTo(q).mouseover(function(a){k(a).nodeName&&"LI"==k(a).nodeName.toUpperCase()&&(c=d("li",l).removeClass(g.ACTIVE).index(k(a)),d(k(a)).addClass(g.ACTIVE))}).click(function(a){d(k(a)).addClass(g.ACTIVE);t();b.focus();return!1}).mousedown(function(){n.mouseDownOnSelect=!0}).mouseup(function(){n.mouseDownOnSelect=!1}),0<a.width&&q.css("width",a.width),u=!1)}function k(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function h(b){e.slice(c,c+1).removeClass(g.ACTIVE);
c+=b;0>c?c=e.size()-1:c>=e.size()&&(c=0);b=e.slice(c,c+1).addClass(g.ACTIVE);if(a.scroll){var d=0;e.slice(0,c).each(function(){d+=this.offsetHeight});d+b[0].offsetHeight-l.scrollTop()>l[0].clientHeight?l.scrollTop(d+b[0].offsetHeight-l.innerHeight()):d<l.scrollTop()&&l.scrollTop(d)}}var g={ACTIVE:"ac_over"},e,c=-1,f,v="",u=!0,q,l;return{display:function(b,h){r();f=b;v=h;l.empty();b=f.length;b=a.max&&a.max<b?a.max:b;for(h=0;h<b;h++)if(f[h]){var k=a.formatItem(f[h].data,h+1,b,f[h].value,v);!1!==k&&
(k=d("<li/>").html(a.highlight(k,v)).addClass(0==h%2?"ac_even":"ac_odd").appendTo(l)[0],d.data(k,"ac_data",f[h]))}e=l.find("li");a.selectFirst&&(e.slice(0,1).addClass(g.ACTIVE),c=0);d.fn.bgiframe&&l.bgiframe()},next:function(){h(1)},prev:function(){h(-1)},pageUp:function(){0!=c&&0>c-8?h(-c):h(-8)},pageDown:function(){c!=e.size()-1&&c+8>e.size()?h(e.size()-1-c):h(8)},hide:function(){q&&q.hide();e&&e.removeClass(g.ACTIVE);c=-1},visible:function(){return q&&q.is(":visible")},current:function(){return this.visible()&&
(e.filter("."+g.ACTIVE)[0]||a.selectFirst&&e[0])},show:function(){var c=d(b).offset();q.css({width:"string"==typeof a.width||0<a.width?a.width:d(b).width(),top:c.top+b.offsetHeight,left:c.left}).show();if(a.scroll&&(l.scrollTop(0),l.css({maxHeight:a.scrollHeight,overflow:"auto"}),d.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var f=0;e.each(function(){f+=this.offsetHeight});c=f>a.scrollHeight;l.css("height",c?a.scrollHeight:f);c||e.width(l.width()-parseInt(e.css("padding-left"))-
parseInt(e.css("padding-right")))}},selected:function(){var a=e&&e.filter("."+g.ACTIVE).removeClass(g.ACTIVE);return a&&a.length&&d.data(a[0],"ac_data")},emptyList:function(){l&&l.empty()},unbind:function(){q&&q.remove()}}};d.fn.selection=function(a,b){if(void 0!==a)return this.each(function(){if(this.createTextRange){var d=this.createTextRange();void 0===b||a==b?d.move("character",a):(d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b));d.select()}else this.setSelectionRange?this.setSelectionRange(a,
b):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=b)});var d=this[0];if(d.createTextRange){var n=document.selection.createRange(),r=d.value,k=n.text.length;n.text="<->";n=d.value.indexOf("<->");d.value=r;this.selection(n,n+k);return{start:n,end:n+k}}if(void 0!==d.selectionStart)return{start:d.selectionStart,end:d.selectionEnd}}})(jQuery);