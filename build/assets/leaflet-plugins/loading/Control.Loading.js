//# sourceMappingURL=Control.Loading.js.map
(function(){function e(b){b.Control.Loading=b.Control.extend({options:{position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(a){b.setOptions(this,a);this._dataLoaders={};null!==this.options.zoomControl&&(this.zoomControl=this.options.zoomControl)},onAdd:function(a){if(this.options.spinjs&&"function"!==typeof Spinner)return c.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");
this._addLayerListeners(a);this._addMapListeners(a);this.options.separate||this.zoomControl||(a.zoomControl?this.zoomControl=a.zoomControl:a.zoomsliderControl&&(this.zoomControl=a.zoomsliderControl));a="leaflet-control-loading";var d;this.zoomControl&&!this.options.separate?(d=this.zoomControl._container,a+=" leaflet-bar-part-bottom leaflet-bar-part last",b.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):d=b.DomUtil.create("div","leaflet-control-zoom leaflet-bar");this._indicator=
b.DomUtil.create("a",a,d);this.options.spinjs&&(this._spinner=(new Spinner(this.options.spin)).spin(),this._indicator.appendChild(this._spinner.el));return d},onRemove:function(a){this._removeLayerListeners(a);this._removeMapListeners(a)},removeFrom:function(a){return this.zoomControl&&!this.options.separate?(this._container.removeChild(this._indicator),this._map=null,this.onRemove(a),this):b.Control.prototype.removeFrom.call(this,a)},addLoader:function(a){this._dataLoaders[a]=!0;this.updateIndicator()},
removeLoader:function(a){delete this._dataLoaders[a];this.updateIndicator()},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return 0<this._countLoaders()},_countLoaders:function(){var a=0,b;for(b in this._dataLoaders)this._dataLoaders.hasOwnProperty(b)&&a++;return a},_showIndicator:function(){b.DomUtil.addClass(this._indicator,"is-loading");this.options.separate||(this.zoomControl instanceof b.Control.Zoom?b.DomUtil.removeClass(this._getLastControlButton(),
"leaflet-bar-part-bottom"):"function"===typeof b.Control.Zoomslider&&this.zoomControl instanceof b.Control.Zoomslider&&b.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){b.DomUtil.removeClass(this._indicator,"is-loading");this.options.separate||(this.zoomControl instanceof b.Control.Zoom?b.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):"function"===typeof b.Control.Zoomslider&&this.zoomControl instanceof b.Control.Zoomslider&&
b.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var a=this.zoomControl._container,b=a.children.length-1;0<b;){var c=a.children[b];if(this._indicator!==c&&0!==c.offsetWidth&&0!==c.offsetHeight)break;b--}return a.children[b]},_handleLoading:function(a){this.addLoader(this.getEventId(a))},_handleLoad:function(a){this.removeLoader(this.getEventId(a))},getEventId:function(a){return a.id?a.id:a.layer?a.layer._leaflet_id:a.target._leaflet_id},
_layerAdd:function(a){if(a.layer&&a.layer.on)try{a.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(b){c.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",a.layer),c.warn("L.Control.Loading: Full details",b)}},_addLayerListeners:function(a){a.eachLayer(function(a){if(a.on)a.on({loading:this._handleLoading,load:this._handleLoad},this)},this);a.on("layeradd",this._layerAdd,this)},_removeLayerListeners:function(a){a.eachLayer(function(a){a.off&&a.off({loading:this._handleLoading,
load:this._handleLoad},this)},this);a.off("layeradd",this._layerAdd,this)},_addMapListeners:function(a){a.on({dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(a){a.off({dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}});b.Map.addInitHook(function(){this.options.loadingControl&&(this.loadingControl=new b.Control.Loading,this.addControl(this.loadingControl))});b.Control.loading=function(a){return new b.Control.Loading(a)}}
var c=window.console||{error:function(){},warn:function(){}};"function"===typeof define&&define.amd?define(["leaflet"],function(b){e(b)}):e(L)})();