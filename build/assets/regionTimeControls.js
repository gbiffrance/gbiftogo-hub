//# sourceMappingURL=regionTimeControls.js.map
var RegionTimeControls=function(n){var d,g=2,u,v,e,f,p,h,l,k,b,q=function(a){return(new Date(a)).toISOString().slice(0,10)},x=function(){b.parent.find("#playButton").on("click",function(){w()});b.parent.find("#stopButton").on("click",function(){r()});b.parent.find("#pauseButton").on("click",function(){0===g&&(b.parent.find("#pauseButton").addClass("selected").trigger("selected"),b.parent.find("#playButton").removeClass("selected").trigger("selected"),clearInterval(p),g=1)});b.parent.find("#resetButton").on("click",
function(){d.setValue([f,e],!1,!0);r();k([f,e]);m([f,e])})},t=function(a){if(l){var c=n.parent.find("#stepSize").val().trim(),b=parseInt(c.replace(/[^\d]/g,""));a=moment(a);return c.endsWith("d")||c.endsWith("day")||c.endsWith("days")?a.add(b,"days"):c.endsWith("m")||c.endsWith("month")||c.endsWith("months")?a.add(b,"months"):a.add(b,"years")}return parseInt(n.parent.find("#stepSize").val())+a},w=function(){switch(g){case 2:g=0;d.setValue([f,t(f)],!1,!0);k(d.getValue());break;case 1:g=0,d.setValue([h[0],
h[1]],!1,!0),k(d.getValue())}b.parent.find("#pauseButton").removeClass("selected").trigger("selected");b.parent.find("#playButton").addClass("selected").trigger("selected");h=d.getValue();p=setInterval(function(){var a=t(h[1]),a=a<e?a:e,b=t(h[0]);b<e?(d.setValue([b,a],!1,!0),h=d.getValue(),k(d.getValue())):r()},4E3)},r=function(){clearInterval(p);b.parent.find("#pauseButton").removeClass("selected").trigger("selected");b.parent.find("#playButton").removeClass("selected").trigger("selected");g=2},
m=function(a){l?(b.parent.find("#timeFrom").text(q(a[0])),b.parent.find("#timeTo").text(q(a[1]))):(b.parent.find("#timeFrom").text(a[0]),b.parent.find("#timeTo").text(a[1]))};(function(a){k=a.callback;b=a;f=u=a.range[0];e=v=a.range[1];l=a.date;m(a.range);if(l){var c=(e-f)/864E5;150>c?a.parent.find("#stepSize").val(Math.ceil(c/10)+"days"):1825>=c?a.parent.find("#stepSize").val(Math.ceil(c/300)+"months"):a.parent.find("#stepSize").val(Math.ceil(c/3650)+"years")}else a.parent.find("#stepSize").val((e-
f)/10);c={tooltip:"hide",min:f,max:e,range:!0,value:[u,v]};l&&(c.formatter=q);d=a.parent.find("#timeSlider").slider(c).on("slideStop",function(a,b){k(d.getValue());m(d.getValue())}).on("slide",function(a,b){m(d.getValue())}).data("slider");x()})(n);return{}};