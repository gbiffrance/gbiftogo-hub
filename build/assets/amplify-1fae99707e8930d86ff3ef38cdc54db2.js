//# sourceMappingURL=amplify.js.map
(function(e,m){var p=[].slice,f={};e.amplify={publish:function(k){if("string"!==typeof k)throw Error("You must provide a valid topic to publish.");var h=p.call(arguments,1),b,a,c,d=0;if(!f[k])return!0;b=f[k].slice();for(c=b.length;d<c&&(a=b[d],a=a.callback.apply(a.context,h),!1!==a);d++);return!1!==a},subscribe:function(k,h,b,a){if("string"!==typeof k)throw Error("You must provide a valid topic to create a subscription.");3===arguments.length&&"number"===typeof b&&(a=b,b=h,h=null);2===arguments.length&&
(b=h,h=null);a=a||10;for(var c=0,d=k.split(/\s/),g=d.length,l;c<g;c++){k=d[c];l=!1;f[k]||(f[k]=[]);for(var e=f[k].length-1,m={callback:b,context:h,priority:a};0<=e;e--)if(f[k][e].priority<=a){f[k].splice(e+1,0,m);l=!0;break}l||f[k].unshift(m)}return b},unsubscribe:function(e,h,b){if("string"!==typeof e)throw Error("You must provide a valid topic to remove a subscription.");2===arguments.length&&(b=h,h=null);if(f[e])for(var a=f[e].length,c=0;c<a;c++)f[e][c].callback!==b||h&&f[e][c].context!==h||(f[e].splice(c,
1),c--,a--)}}})(this);
(function(e,m){function p(b,a){f.addType(b,function(c,d,g){var l,e=d,h=(new Date).getTime();if(!c){e={};g=[];d=0;try{for(c=a.length;c=a.key(d++);)k.test(c)&&(l=JSON.parse(a.getItem(c)),l.expires&&l.expires<=h?g.push(c):e[c.replace(k,"")]=l.data);for(;c=g.pop();)a.removeItem(c)}catch(n){}return e}c="__amplify__"+c;if(d===m)if(l=(l=a.getItem(c))?JSON.parse(l):{expires:-1},l.expires&&l.expires<=h)a.removeItem(c);else return l.data;else if(null===d)a.removeItem(c);else{l=JSON.stringify({data:d,expires:g.expires?
h+g.expires:null});try{a.setItem(c,l)}catch(n){f[b]();try{a.setItem(c,l)}catch(r){throw f.error();}}}return e})}var f=e.store=function(b,a,c){var d=f.type;c&&c.type&&c.type in f.types&&(d=c.type);return f.types[d](b,a,c||{})};f.types={};f.type=null;f.addType=function(b,a){f.type||(f.type=b);f.types[b]=a;f[b]=function(a,d,g){g=g||{};g.type=b;return f(a,d,g)}};f.error=function(){return"amplify.store quota exceeded"};var k=/^__amplify__/,h;for(h in{localStorage:1,sessionStorage:1})try{window[h].setItem("__amplify__",
"x"),window[h].removeItem("__amplify__"),p(h,window[h])}catch(b){}if(!f.types.localStorage&&window.globalStorage)try{p("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===f.type&&(f.type="globalStorage")}catch(b){}(function(){if(!f.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(a){b.parentNode.removeChild(b);return}f.addType("userData",
function(a,c,d){b.load("amplify");var g,l,e=c,h=(new Date).getTime();if(!a){e={};l=[];for(a=0;c=b.XMLDocument.documentElement.attributes[a++];)g=JSON.parse(c.value),g.expires&&g.expires<=h?l.push(c.name):e[c.name]=g.data;for(;a=l.pop();)b.removeAttribute(a);b.save("amplify");return e}a=a.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");a=a.replace(/^-/,"_-");if(c===m)if(g=(c=b.getAttribute(a))?JSON.parse(c):{expires:-1},g.expires&&
g.expires<=h)b.removeAttribute(a);else return g.data;else null===c?b.removeAttribute(a):(l=b.getAttribute(a),g=JSON.stringify({data:c,expires:d.expires?h+d.expires:null}),b.setAttribute(a,g));try{b.save("amplify")}catch(k){null===l?b.removeAttribute(a):b.setAttribute(a,l);f.userData();try{b.setAttribute(a,g),b.save("amplify")}catch(r){throw null===l?b.removeAttribute(a):b.setAttribute(a,l),f.error();}}return e})}})();(function(){function b(a){return a===m?m:JSON.parse(JSON.stringify(a))}var a={},
c={};f.addType("memory",function(d,g,l){if(!d)return b(a);if(g===m)return b(a[d]);c[d]&&(clearTimeout(c[d]),delete c[d]);if(null===g)return delete a[d],null;a[d]=g;l.expires&&(c[d]=setTimeout(function(){delete a[d];delete c[d]},l.expires));return g})})()})(this.amplify=this.amplify||{});
(function(e,m){function p(){}function f(e){var h=!1;setTimeout(function(){h=!0},1);return function(){var b=this,a=arguments;h?e.apply(b,a):setTimeout(function(){e.apply(b,a)},1)}}e.request=function(k,h,b){var a=k||{};"string"===typeof a&&("[object Function]"==={}.toString.call(h)&&(b=h,h={}),a={resourceId:k,data:h||{},success:b});k={abort:p};h=e.request.resources[a.resourceId];var c=a.success||p,d=a.error||p;a.success=f(function(b,d){d=d||"success";e.publish("request.success",a,b,d);e.publish("request.complete",
a,b,d);c(b,d)});a.error=f(function(b,c){c=c||"error";e.publish("request.error",a,b,c);e.publish("request.complete",a,b,c);d(b,c)});if(!h){if(!a.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+a.resourceId;}if(e.publish("request.before",a))return e.request.resources[a.resourceId](a,k),k;a.error(null,"abort")};e.request.types={};e.request.resources={};e.request.define=function(f,h,b){if("string"===typeof h){if(!(h in e.request.types))throw"amplify.request.define: unknown type: "+
h;b.resourceId=f;e.request.resources[f]=e.request.types[h](b)}else e.request.resources[f]=h}})(amplify);
(function(e,m,p){var f=["status","statusText","responseText","responseXML","readyState"],k=/\{([^\}]+)\}/g;e.request.types.ajax=function(b){b=m.extend({type:"GET"},b);return function(a,c){var d,g,h=c.abort,k=m.extend(!0,{},b,{data:a.data}),q=!1,n={readyState:0,setRequestHeader:function(a,b){return d.setRequestHeader(a,b)},getAllResponseHeaders:function(){return d.getAllResponseHeaders()},getResponseHeader:function(a){return d.getResponseHeader(a)},overrideMimeType:function(a){return d.overrideMimeType(a)},
abort:function(){q=!0;try{d.abort()}catch(a){}g(null,"abort")},success:function(b,c){a.success(b,c)},error:function(b,c){a.error(b,c)}};g=function(a,b){m.each(f,function(a,b){try{n[b]=d[b]}catch(c){}});/OK$/.test(n.statusText)&&(n.statusText="success");a===p&&(a=null);q&&(b="abort");/timeout|error|abort/.test(b)?n.error(a,b):n.success(a,b);g=m.noop};e.publish("request.ajax.preprocess",b,a,k,n);m.extend(k,{isJSONP:function(){return/jsonp/gi.test(this.dataType)},cacheURL:function(){if(!this.isJSONP())return this.url;
var a="callback";this.hasOwnProperty("jsonp")&&(!1!==this.jsonp?a=this.jsonp:this.hasOwnProperty("jsonpCallback")&&(a=this.jsonpCallback));return this.url.replace(new RegExp("&?"+a+"=[^&]*&?","gi"),"")},success:function(a,b){g(a,b)},error:function(a,b){g(null,b)},beforeSend:function(c,g){d=c;k=g;return(b.beforeSend?b.beforeSend.call(this,n,k):!0)&&e.publish("request.before.ajax",b,a,k,n)}});k.cache&&k.isJSONP()&&m.extend(k,{cache:!0});m.ajax(k);c.abort=function(){n.abort();h.call(this)}}};e.subscribe("request.ajax.preprocess",
function(b,a,c){var d=[],g=c.data;"string"!==typeof g&&(g=m.extend(!0,{},b.data,g),c.url=c.url.replace(k,function(a,b){if(b in g)return d.push(b),g[b]}),m.each(d,function(a,b){delete g[b]}),c.data=g)});e.subscribe("request.ajax.preprocess",function(b,a,c){var d=c.data;(a=b.dataMap)&&"string"!==typeof d&&(m.isFunction(a)?c.data=a(d):(m.each(b.dataMap,function(a,b){a in d&&(d[b]=d[a],delete d[a])}),c.data=d))});var h=e.request.cache={_key:function(b,a,c){function d(){return c.charCodeAt(g++)<<24|c.charCodeAt(g++)<<
16|c.charCodeAt(g++)<<8|c.charCodeAt(g++)<<0}c=a+c;a=c.length;for(var g=0,e=d();g<a;)e^=d();return"request-"+b+"-"+e},_default:function(){var b={};return function(a,c,d,e){var f=h._key(c.resourceId,d.cacheURL(),d.data),k=a.cache;if(f in b)return e.success(b[f]),!1;var m=e.success;e.success=function(a){b[f]=a;"number"===typeof k&&setTimeout(function(){delete b[f]},k);m.apply(this,arguments)}}}()};e.store&&(m.each(e.store.types,function(b){h[b]=function(a,c,d,g){var f=h._key(c.resourceId,d.cacheURL(),
d.data);if(c=e.store[b](f))return d.success(c),!1;var k=g.success;g.success=function(c){e.store[b](f,c,{expires:a.cache.expires});k.apply(this,arguments)}}}),h.persist=h[e.store.type]);e.subscribe("request.before.ajax",function(b){var a=b.cache;if(a)return a=a.type||a,h[a in h?a:"_default"].apply(this,arguments)});e.request.decoders={jsend:function(b,a,c,d,e){"success"===b.status?d(b.data):"fail"===b.status?e(b.data,"fail"):"error"===b.status?(delete b.status,e(b,"error")):e(null,"error")}};e.subscribe("request.before.ajax",
function(b,a,c,d){function g(a,b){h(a,b)}function f(a,b){k(a,b)}var h=d.success,k=d.error,n=m.isFunction(b.decoder)?b.decoder:b.decoder in e.request.decoders?e.request.decoders[b.decoder]:e.request.decoders._default;n&&(d.success=function(a,b){n(a,b,d,g,f)},d.error=function(a,b){n(a,b,d,g,f)})})})(amplify,jQuery);